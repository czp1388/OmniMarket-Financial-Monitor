# OmniMarket 金融监控系统 - 环境变量配置模板
# 
# 说明：
# 1. 复制此文件为 .env 并根据实际情况填写配置
# 2. .env 文件不应提交到 Git 仓库（已在 .gitignore 中）
# 3. 生产环境必须更改所有默认密码和密钥
# 4. 带 * 标记的为必填项，其他为可选项

# ============================================
# 应用基础配置
# ============================================

APP_NAME=OmniMarket Financial Monitor
VERSION=1.0.0

# 调试模式（生产环境必须设为 False）*
DEBUG=True

# 服务器配置
HOST=0.0.0.0
PORT=8000

# ============================================
# 安全配置（生产环境必填）*
# ============================================

# JWT 密钥（生产环境必须使用强随机字符串）*
# 生成方式：python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-very-secure-random-secret-key-change-this-in-production

# JWT 算法
ALGORITHM=HS256

# Token 过期时间（分钟）
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================
# CORS 配置
# ============================================

# 允许的跨域来源（生产环境需要指定确切域名）
# 开发环境示例：
# CORS_ORIGINS=["http://localhost:3000","http://localhost:5173"]
# 生产环境示例：
# CORS_ORIGINS=["https://yourdomain.com","https://www.yourdomain.com"]

# ============================================
# 数据库配置
# ============================================

# PostgreSQL 数据库连接（生产环境必填）*
# 格式：postgresql://用户名:密码@主机:端口/数据库名
DATABASE_URL=postgresql://user:password@localhost:5432/omnimarket

# InfluxDB 配置（用于时序数据存储）*
INFLUXDB_URL=http://localhost:8086
INFLUXDB_TOKEN=your-influxdb-token-here
INFLUXDB_ORG=omnimarket
INFLUXDB_BUCKET=market_data

# Redis 配置（用于缓存）*
# 格式：redis://[:密码@]主机:端口[/数据库编号]
REDIS_URL=redis://localhost:6379
# 如果 Redis 设置了密码：
# REDIS_URL=redis://:your-redis-password@localhost:6379

# ============================================
# 数据配置
# ============================================

# 数据更新间隔（秒）
DATA_UPDATE_INTERVAL=60

# 最大历史数据天数
MAX_HISTORICAL_DAYS=365

# ============================================
# 数据源 API 密钥（可选）
# ============================================
# 说明：不配置 API 密钥时，系统会自动降级到免费数据源或模拟数据

# Binance 交易所 API（加密货币数据）
BINANCE_API_KEY=
BINANCE_SECRET_KEY=

# Bybit 交易所 API（加密货币数据）
BYBIT_API_KEY=
BYBIT_SECRET_KEY=

# Tushare API（中国股票数据）
# 获取地址：https://tushare.pro/register
TUSHARE_TOKEN=

# Alpha Vantage API（全球股票和外汇数据）
# 获取地址：https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_API_KEY=

# ============================================
# 通知服务配置（可选）
# ============================================

# 邮件通知（SMTP）
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=your-email@gmail.com

# Telegram 通知
# Bot Token 获取：与 @BotFather 对话创建机器人
# Chat ID 获取：与 @userinfobot 对话获取你的 ID
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Webhook 通知
WEBHOOK_URL=

# ============================================
# 富途证券 OpenD 配置（港股数据）
# ============================================
# 说明：需要安装富途 OpenD 客户端并配置
# 文档：https://openapi.futunn.com/futu-api-doc/

FUTU_HOST=127.0.0.1
FUTU_PORT=11111
FUTU_UNLOCK_PASSWORD=

# ============================================
# 回测引擎配置（可选）
# ============================================

# LEAN 引擎配置（需要额外安装 pythonnet）
LEAN_ENGINE_ENABLED=False
LEAN_DATA_PATH=/path/to/lean/data

# ============================================
# 性能和限制配置
# ============================================

# API 速率限制（每分钟请求数）
API_RATE_LIMIT_PER_MINUTE=300

# WebSocket 最大连接数（每用户）
MAX_WS_CONNECTIONS_PER_USER=5

# 数据缓存 TTL（秒）
CACHE_TTL=300

# ============================================
# 日志配置
# ============================================

# 日志级别（DEBUG, INFO, WARNING, ERROR, CRITICAL）
LOG_LEVEL=INFO

# 日志文件路径
LOG_FILE_PATH=/var/log/omnimarket/app.log

# ============================================
# 开发工具配置（仅开发环境）
# ============================================

# 自动重载（开发环境）
RELOAD=True

# API 文档（生产环境建议关闭）
ENABLE_DOCS=True

# ============================================
# 生产环境部署检查清单
# ============================================
# 
# 部署前请确保：
# □ DEBUG=False
# □ SECRET_KEY 已更改为强随机字符串
# □ 数据库密码已更改
# □ Redis 密码已设置
# □ CORS_ORIGINS 已配置正确的域名
# □ 所有敏感信息不包含默认值
# □ 日志路径可写
# □ 数据库连接可用
# □ 备份策略已配置
# 
# ============================================

# ============================================
# 配置示例
# ============================================

# 开发环境示例：
# DEBUG=True
# DATABASE_URL=postgresql://dev:dev@localhost:5432/omnimarket_dev
# CORS_ORIGINS=["http://localhost:3000","http://localhost:5173"]

# 生产环境示例：
# DEBUG=False
# SECRET_KEY=JkL8N2mP4rQ6sT8uV0wX2yZ4aB6cD8eF0gH2iJ4kL6mN8oP0qR2sT4uV6wX8yZ0
# DATABASE_URL=postgresql://omnimarket:StrongPassword123!@db.example.com:5432/omnimarket
# INFLUXDB_URL=http://influxdb.example.com:8086
# INFLUXDB_TOKEN=YourInfluxDBTokenHere==
# REDIS_URL=redis://:RedisPassword123!@redis.example.com:6379
# CORS_ORIGINS=["https://omnimarket.example.com"]
# SMTP_USERNAME=noreply@example.com
# SMTP_PASSWORD=YourEmailAppPassword
# EMAIL_FROM=noreply@example.com
# API_RATE_LIMIT_PER_MINUTE=1000
# LOG_LEVEL=WARNING
# ENABLE_DOCS=False
