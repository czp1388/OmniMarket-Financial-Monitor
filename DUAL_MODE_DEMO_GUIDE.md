# 🎯 双模架构功能演示指南

## 快速体验（5分钟）

### 方式1：自动启动
```bash
.\start_dual_mode.ps1
```
脚本会自动：
1. 检查文件和端口
2. 验证核心功能
3. 启动后端（端口8000）
4. 启动前端（端口3001）
5. 打开浏览器

### 方式2：手动启动
```bash
# 终端1：后端
cd backend
uvicorn main:app --reload --port 8000

# 终端2：前端
cd frontend
npm run dev
```

---

## 📱 助手模式体验

### 访问地址
http://localhost:3001/assistant

### 页面布局
```
┌─────────────────────────────────────────────────┐
│  智能投资助手 🤖             [切换到专家模式→] │
├─────────────────────────────────────────────────┤
│  早上好！今天是 2025年12月7日                    │
│  让我们看看今天有什么机会                        │
├──────────────────┬──────────────────────────────┤
│ 💼 我的账户      │  🔍 市场机会                  │
│  总资产: ¥50,000 │  ┌─────────────────────────┐ │
│  今日: +¥320     │  │ 市场出现回调机会 [中]   │ │
│  累计: +¥5,680   │  │ 标普500回调3%，是定投   │ │
│  收益率: +11.36% │  │ 好时机                  │ │
│                  │  │ 💡 可启动稳健增长策略   │ │
│ ✅ 今日待办      │  │ [立即定投] →            │ │
│  ⚡ 市场出现机会  │  └─────────────────────────┘ │
│     定投500元 →  │  ┌─────────────────────────┐ │
│  💡 收益到账     │  │ 黄金避险需求上升 [低]   │ │
│     查看详情 →   │  │ 国际局势紧张，黄金表现  │ │
│                  │  │ 活跃                    │ │
│ 🎯 运行中的策略  │  │ [了解详情] →            │ │
│  🛡️ 稳健增长定投宝│ └─────────────────────────┘ │
│  运行45天 +¥2,340│                             │
└──────────────────┴──────────────────────────────┘
│ 快速入口                                        │
│ [📦 浏览策略包] [🎯 设置目标] [📊 查看表现]    │
└─────────────────────────────────────────────────┘
```

### 关键特性
1. **无专业术语** - "市场情绪"代替"RSI"，"价格走势"代替"K线"
2. **目标导向** - 显示"离退休目标还差多少"而非"收益率"
3. **行动建议** - "今天该做什么"而非"数据展示"

---

## 🔬 专家模式体验

### 访问地址
http://localhost:3001/expert

### 页面布局（彭博风格）
```
┌─────────────────────────────────────────────────┐
│  OmniMarket 专业版               [助手模式→]   │
├─────────────────────────────────────────────────┤
│ BTC/USDT    $43,567.89  +2.34%  Vol: 1.2B      │
│ [1M] [5M] [15M] [1H] [4H] [1D] [1W]            │
├──────────────────┬──────────────────────────────┤
│  📊 K线图        │  📈 技术指标                  │
│  MA(5,10,20,60) │  RSI(14): 67.8 ⚠️            │
│  MACD: Bullish  │  MACD: 0.0234 / 0.0189       │
│  Volume: High   │  Sharpe: 1.85                │
│                  │  Alpha: 0.03 / Beta: 0.92    │
│  🎯 交易信号     │  ⚡ 预警                      │
│  • 金叉出现     │  • RSI超买预警                │
│  • 突破压力位   │  • 成交量异常                 │
│  • MACD金叉     │  • 形态识别: 头肩底           │
└──────────────────┴──────────────────────────────┘
```

### 关键特性
1. **完整技术指标** - 夏普、Alpha、Beta、MACD等
2. **参数完全控制** - 可调整所有技术参数
3. **专业术语** - K线、RSI、MACD、布林带等

---

## 🔗 API文档体验

### 访问地址
http://localhost:8000/docs

### 查看助手模式端点
1. 滚动到 **"智能助手"** 标签
2. 看到6个端点：
   - `POST /assistant/strategies/activate` - 激活策略包
   - `GET /assistant/strategies/packages` - 获取策略包列表
   - `GET /assistant/strategies/packages/{id}` - 策略包详情
   - `GET /assistant/opportunities` - 市场机会
   - `GET /assistant/dashboard/summary` - 仪表盘摘要
   - `POST /assistant/goals/update` - 更新目标

### 测试激活策略包
1. 展开 `POST /assistant/strategies/activate`
2. 点击 **"Try it out"**
3. 输入示例数据：
```json
{
  "user_goal": "stable_growth",
  "risk_tolerance": "low",
  "investment_amount": 5000,
  "investment_horizon": "long_term"
}
```
4. 点击 **"Execute"**
5. 查看响应：
```json
{
  "strategy_package_id": "pkg_xxx",
  "friendly_name": "稳健增长定投宝",
  "status": "activated",
  "explanation": {
    "what_it_does": "适合长期投资，波动小，回撤可控...",
    "analogy": "就像超市促销时多买，平时少买",
    "risk_level": "低风险 - 像货币基金"
  }
}
```

---

## 🧪 curl命令测试

### 获取策略包列表
```bash
curl -X GET "http://localhost:8000/api/v1/assistant/strategies/packages"
```

**预期输出**:
```json
[
  {
    "package_id": "stable_growth_low_risk",
    "friendly_name": "稳健增长定投宝",
    "icon": "🛡️",
    "tagline": "睡得着的投资",
    "risk_score": 2,
    "expected_return": "8-12% 年化",
    "suitable_for": ["月光族", "稳健型", "长期投资"]
  },
  ...
]
```

### 激活策略包
```bash
curl -X POST "http://localhost:8000/api/v1/assistant/strategies/activate" \
  -H "Content-Type: application/json" \
  -d '{
    "user_goal": "stable_growth",
    "risk_tolerance": "low",
    "investment_amount": 5000
  }'
```

### PowerShell测试脚本
```bash
.\test_dual_mode_curl.ps1
```
会展示专家模式 vs 助手模式的API对比

---

## 📊 双模对比演示

### 场景：用户想做投资回测

#### 专家模式流程
1. 打开 `/expert` 页面
2. 选择策略：`moving_average_crossover`
3. 填写参数：
   - `fast_period`: 8
   - `slow_period`: 21
   - `stop_loss`: 0.02
   - `take_profit`: 0.05
4. 设置品种、日期、资金
5. 点击"开始回测"
6. 查看结果：夏普1.85、Alpha 0.03、最大回撤-8.34%

**用户心智负担**: 需要理解10+个技术参数

#### 助手模式流程
1. 打开 `/assistant` 页面
2. 点击"浏览策略包"
3. 看到卡片："🛡️ 稳健增长定投宝 - 睡得着的投资"
4. 阅读说明："就像超市促销时多买，平时少买"
5. 点击"激活策略"
6. 查看结果："预期年化8-12%，风险低，适合长期投资"

**用户心智负担**: 只需3次点击，0个技术参数

---

## 🎓 核心创新展示

### 1. 意图理解引擎

**输入**: 用户说的话
```
"我想稳健增长，不想冒太大风险，有5000元闲钱"
```

**系统处理**:
```python
user_goal = UserGoal.STABLE_GROWTH
risk_tolerance = RiskTolerance.LOW
investment_amount = 5000

# 自动翻译为
strategy_id = "rsi_strategy"
parameters = {
    "rsi_period": 14,
    "rsi_oversold": 30,
    "rsi_overbought": 70,
    "stop_loss": 0.05
}
```

**输出**: 白话解读
```
"稳健增长定投宝"
"就像超市促销时多买，平时少买"
"风险低 - 像货币基金，偶有小幅波动"
```

### 2. 策略包系统

| 策略包 | 友好名称 | Icon | 风险 | 底层策略 | 参数 |
|--------|----------|------|------|----------|------|
| stable_growth_low_risk | 稳健增长定投宝 | 🛡️ | 2/5 | rsi_strategy | RSI(14,30,70) |
| aggressive_growth_high_risk | 趋势追踪器 | 🚀 | 4/5 | moving_average_crossover | MA(5,20) |
| capital_preservation_low_risk | 资本守护者 | 🏦 | 1/5 | rsi_strategy | RSI(21,35,65) |

**关键**: 用户看到的是"稳健增长定投宝"，系统执行的是`rsi_strategy(14,30,70)`

### 3. 渐进式透明

```
助手模式（默认）
    ↓ 点击"查看技术参数"
查看底层策略ID和参数
    ↓ 点击"切换到专家模式"
进入完整技术界面
```

用户可以从"小白"逐步成长为"专家"

---

## 💡 演示话术

### 给非技术人员演示（助手模式）
> "这是为普通投资者设计的界面。你不需要懂什么是RSI、MACD，只需要告诉我们：'我想稳健增长'、'我能承受多少风险'。系统会自动帮你选择合适的策略。"

**演示步骤**:
1. 打开 `/assistant`
2. 点击"浏览策略包"
3. 指向"稳健增长定投宝"卡片
4. 读出："就像超市促销时多买，平时少买"
5. 说明："看，没有任何专业术语，普通人都能理解"

### 给技术人员演示（双模对比）
> "这是同一个回测引擎，但我们提供了两种交互方式。专家模式暴露所有技术参数，助手模式隐藏细节用白话沟通。关键是底层引擎完全相同。"

**演示步骤**:
1. 打开 `/expert` 和 `/assistant` 两个标签
2. 在专家模式填写 `fast_period=8`
3. 在助手模式选择"稳健增长"
4. 打开浏览器开发者工具，查看网络请求
5. 指出：助手模式的请求被自动翻译为专家模式的参数

---

## 🔍 验证清单

### 功能验证
- [ ] 访问 `/assistant` 能看到助手界面
- [ ] 访问 `/expert` 能看到专家界面
- [ ] API文档有"智能助手"标签
- [ ] 可以测试策略包激活接口
- [ ] 获取策略包列表返回5个策略包
- [ ] 每个策略包有友好名称和白话说明

### 数据验证
- [ ] 助手模式返回通俗解读（不是技术指标）
- [ ] 专家模式返回技术指标（夏普、Alpha等）
- [ ] 同一策略在两种模式下底层引擎相同
- [ ] 策略包参数自动映射正确

### 交互验证
- [ ] 助手界面有"切换到专家模式"按钮
- [ ] 专家界面有"切换到助手模式"按钮
- [ ] 策略包卡片可点击查看详情
- [ ] 市场机会有行动按钮

---

## 📈 下一步开发建议

### 立即可做（1-2天）
1. 完善市场机会推荐算法（当前返回模拟数据）
2. 用户目标持久化（保存到PostgreSQL）
3. 策略运行状态实时更新（WebSocket）

### 本周可做（3-5天）
1. 添加更多策略包（目前5个，可扩展到15个）
2. 策略包详情页（FAQ、历史表现图表）
3. 通知设置页面（选择推送渠道）

### 本月可做（2-4周）
1. 目标跟踪功能（距离目标还有多远的进度条）
2. 策略对比工具（同时运行多个策略对比）
3. 助手聊天界面（类似ChatGPT的交互）

---

## 🎯 成功指标

### 产品验收
- ✅ 零基础用户可在3分钟内激活策略
- ✅ 专家用户可完全控制所有参数
- ✅ 两种模式共享底层数据
- ✅ 渐进式透明（可从助手升级到专家）

### 技术验收
- ✅ API文档完整
- ✅ 前端界面响应流畅
- ✅ 意图翻译准确
- ✅ 白话生成合理

### 用户反馈（待收集）
- [ ] 助手模式是否真的"零门槛"？
- [ ] 白话解读是否通俗易懂？
- [ ] 策略包分类是否合理？
- [ ] 从助手到专家的路径是否清晰？

---

**最后更新**: 2025年12月7日  
**状态**: ✅ 核心功能已实现并验证  
**下一步**: 完善市场机会算法 + 用户反馈收集
